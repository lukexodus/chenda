-- Seed Data: Mock Products
-- Date: 2026-02-09T02:56:09.800Z
-- Total products: 30
-- Note: Requires product_types and users to be seeded first

-- Disable triggers for faster insertion
SET session_replication_role = 'replica';

INSERT INTO products (
  seller_id,
  product_type_id,
  days_already_used,
  listed_date,
  price,
  quantity,
  unit,
  location,
  address,
  storage_condition,
  description,
  status
) VALUES
  (
    6,
    33,
    1,
    '2025-01-29T06:00:00Z',
    85,
    3,
    'containers',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Fresh yogurt, opened yesterday',
    'active'
  ),
  (
    6,
    21,
    5,
    '2025-01-28T07:00:00Z',
    180,
    2,
    'dozen',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Farm fresh eggs',
    'active'
  ),
  (
    6,
    2,
    2,
    '2025-01-28T08:00:00Z',
    95,
    2,
    'liters',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Cultured buttermilk',
    'active'
  ),
  (
    6,
    9,
    3,
    '2025-01-27T09:00:00Z',
    150,
    4,
    'containers',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Low-fat cottage cheese',
    'active'
  ),
  (
    6,
    24,
    1,
    '2025-01-29T10:00:00Z',
    120,
    2,
    'bottles',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Holiday eggnog',
    'active'
  ),
  (
    6,
    10,
    7,
    '2025-01-26T11:00:00Z',
    130,
    5,
    'blocks',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Philadelphia-style cream cheese',
    'active'
  ),
  (
    6,
    25,
    0,
    '2025-01-30T06:00:00Z',
    80,
    4,
    'bottles',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Just opened today - kefir fermented milk',
    'active'
  ),
  (
    6,
    5,
    10,
    '2025-01-25T12:00:00Z',
    250,
    2,
    'kg',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Sharp cheddar cheese',
    'active'
  ),
  (
    6,
    8,
    5,
    '2025-01-27T13:00:00Z',
    110,
    3,
    'bottles',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Vanilla coffee creamer',
    'active'
  ),
  (
    6,
    16,
    8,
    '2025-01-26T14:00:00Z',
    140,
    3,
    'containers',
    ST_SetSRID(ST_MakePoint(121.0223, 14.6091), 4326),
    'Pasig City',
    'refrigerated_opened',
    'Sour cream dip',
    'active'
  ),
  (
    7,
    33,
    2,
    '2025-01-28T06:00:00Z',
    90,
    2,
    'containers',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'Yogurt - opened 2 days ago',
    'active'
  ),
  (
    7,
    21,
    10,
    '2025-01-25T07:00:00Z',
    170,
    3,
    'dozen',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'Free-range eggs',
    'active'
  ),
  (
    7,
    6,
    5,
    '2025-01-27T08:00:00Z',
    300,
    1,
    'wheel',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'French brie cheese',
    'active'
  ),
  (
    7,
    7,
    3,
    '2025-01-28T09:00:00Z',
    160,
    4,
    'bags',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'Shredded mozzarella',
    'active'
  ),
  (
    7,
    11,
    12,
    '2025-01-24T10:00:00Z',
    100,
    2,
    'bottles',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'Half and half cream',
    'active'
  ),
  (
    7,
    13,
    1,
    '2025-01-29T11:00:00Z',
    180,
    2,
    'bottles',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'Heavy whipping cream',
    'active'
  ),
  (
    7,
    16,
    4,
    '2025-01-28T12:00:00Z',
    190,
    3,
    'containers',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'Fresh ricotta cheese',
    'active'
  ),
  (
    7,
    25,
    3,
    '2025-01-27T13:00:00Z',
    85,
    1,
    'bottle',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'Kefir - 3 days old',
    'active'
  ),
  (
    7,
    9,
    6,
    '2025-01-27T14:00:00Z',
    145,
    2,
    'containers',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'Cottage cheese - full fat',
    'active'
  ),
  (
    7,
    2,
    4,
    '2025-01-27T15:00:00Z',
    100,
    2,
    'liters',
    ST_SetSRID(ST_MakePoint(121.0506, 14.5378), 4326),
    'Taguig City',
    'refrigerated_opened',
    'Fresh buttermilk',
    'active'
  ),
  (
    8,
    33,
    0,
    '2025-01-30T05:00:00Z',
    88,
    5,
    'containers',
    ST_SetSRID(ST_MakePoint(120.9794, 14.5833), 4326),
    'Manila City',
    'refrigerated_opened',
    'Just opened - fresh yogurt',
    'active'
  ),
  (
    8,
    21,
    7,
    '2025-01-26T06:00:00Z',
    175,
    4,
    'dozen',
    ST_SetSRID(ST_MakePoint(120.9794, 14.5833), 4326),
    'Manila City',
    'refrigerated_opened',
    'Large eggs',
    'active'
  ),
  (
    8,
    5,
    15,
    '2025-01-22T07:00:00Z',
    240,
    1,
    'kg',
    ST_SetSRID(ST_MakePoint(120.9794, 14.5833), 4326),
    'Manila City',
    'refrigerated_opened',
    'Aged cheddar',
    'active'
  ),
  (
    8,
    10,
    2,
    '2025-01-29T08:00:00Z',
    135,
    6,
    'blocks',
    ST_SetSRID(ST_MakePoint(120.9794, 14.5833), 4326),
    'Manila City',
    'refrigerated_opened',
    'Original cream cheese',
    'active'
  ),
  (
    8,
    8,
    10,
    '2025-01-25T09:00:00Z',
    105,
    2,
    'bottles',
    ST_SetSRID(ST_MakePoint(120.9794, 14.5833), 4326),
    'Manila City',
    'refrigerated_opened',
    'Hazelnut coffee creamer',
    'active'
  ),
  (
    9,
    33,
    1,
    '2025-01-29T05:00:00Z',
    82,
    6,
    'containers',
    ST_SetSRID(ST_MakePoint(120.9721, 14.6507), 4326),
    'Valenzuela City',
    'refrigerated_opened',
    'Farm-fresh yogurt',
    'active'
  ),
  (
    9,
    25,
    1,
    '2025-01-29T05:30:00Z',
    78,
    4,
    'bottles',
    ST_SetSRID(ST_MakePoint(120.9721, 14.6507), 4326),
    'Valenzuela City',
    'refrigerated_opened',
    'Kefir - fermented milk drink',
    'active'
  ),
  (
    9,
    2,
    1,
    '2025-01-29T06:00:00Z',
    92,
    3,
    'liters',
    ST_SetSRID(ST_MakePoint(120.9721, 14.6507), 4326),
    'Valenzuela City',
    'refrigerated_opened',
    'Fresh buttermilk',
    'active'
  ),
  (
    9,
    9,
    2,
    '2025-01-28T07:00:00Z',
    148,
    5,
    'containers',
    ST_SetSRID(ST_MakePoint(120.9721, 14.6507), 4326),
    'Valenzuela City',
    'refrigerated_opened',
    'Low-fat cottage cheese',
    'active'
  ),
  (
    9,
    16,
    3,
    '2025-01-28T08:00:00Z',
    138,
    4,
    'containers',
    ST_SetSRID(ST_MakePoint(120.9721, 14.6507), 4326),
    'Valenzuela City',
    'refrigerated_opened',
    'Sour cream dip',
    'active'
  );

-- Re-enable triggers
SET session_replication_role = 'origin';

-- Update sequence
SELECT setval('products_id_seq', (SELECT MAX(id) FROM products));

-- Note: Materialized view will be refreshed on first query
-- Or manually refresh with: REFRESH MATERIALIZED VIEW products_search_cache;

-- Verify count
SELECT COUNT(*) as products_count FROM products;

-- Show products with enriched data
SELECT 
  p.id,
  pt.name as product_name,
  u.name as seller_name,
  p.price,
  p.quantity,
  p.unit,
  ST_X(p.location::geometry) as longitude,
  ST_Y(p.location::geometry) as latitude,
  p.address,
  p.storage_condition,
  p.days_already_used,
  pt.default_shelf_life_days,
  calculate_shelf_life_percent(pt.default_shelf_life_days, p.days_already_used) as freshness_percent,
  p.status
FROM products p
JOIN product_types pt ON p.product_type_id = pt.id
JOIN users u ON p.seller_id = u.id
ORDER BY p.id
LIMIT 10;
